% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calibration.R
\name{auto.calibrate}
\alias{auto.calibrate}
\title{Auto-Calibration of Raw Accelerometer Data}
\usage{
auto.calibrate(
  accel_data,
  sampling_freq,
  sphere_criterion = 1,
  noise_threshold = 0.013,
  window_seconds = 10,
  min_samples = 100,
  verbose = TRUE
)
}
\arguments{
\item{accel_data}{Data frame with columns x, y, z (acceleration in g-units)
and optionally timestamp}

\item{sampling_freq}{Numeric. Sampling frequency in Hz}

\item{sphere_criterion}{Numeric. Target vector magnitude during non-movement
(default: 1.0 for 1g)}

\item{noise_threshold}{Numeric. Maximum SD within window to be considered
non-movement (default: 0.013g based on van Hees et al., 2014)}

\item{window_seconds}{Numeric. Window size for non-movement detection in
seconds (default: 10)}

\item{min_samples}{Numeric. Minimum number of non-movement samples required
for calibration (default: 100)}

\item{verbose}{Logical. Print progress messages? (default: TRUE)}
}
\value{
List with class 'canhrActi_calibration' containing:
\itemize{
\item \code{calibrated_data} - Data frame with calibrated x, y, z values
\item \code{offset} - Calibration offsets for each axis (x, y, z)
\item \code{scale} - Calibration scale factors for each axis
\item \code{n_nonmovement} - Number of non-movement windows used
\item \code{error_before} - Mean calibration error before correction
\item \code{error_after} - Mean calibration error after correction
\item \code{calibration_success} - Logical. TRUE if calibration improved accuracy
}
}
\description{
Calibrates raw acceleration data using the local gravity method. During periods
of non-movement, the acceleration vector should equal exactly 1g. Deviations
from 1g indicate calibration errors that this function corrects.
}
\details{
\strong{Algorithm (van Hees et al., 2014):}
\enumerate{
\item Identify non-movement periods where SD of each axis < noise_threshold
\item In these periods, the Euclidean norm should equal 1g
\item Use iterative least-squares to find offset and scale corrections
\item Apply corrections: x_cal = (x_raw - offset_x) * scale_x
}

\strong{Use Cases:}
\itemize{
\item Required for raw .gt3x data analysis
\item Corrects for sensor drift and temperature effects
\item Improves accuracy of ENMO and other acceleration metrics
}
}
\examples{
\dontrun{
# Read raw acceleration data
raw_data <- data.frame(
  x = rnorm(10000, 0, 0.5),
  y = rnorm(10000, 1, 0.5),
  z = rnorm(10000, 0, 0.5)
)

# Calibrate
cal_result <- auto.calibrate(raw_data, sampling_freq = 30)

# Use calibrated data
calibrated <- cal_result$calibrated_data
}

}
\references{
van Hees VT, et al. (2014). Autocalibration of accelerometer data for
free-living physical activity assessment using local gravity and temperature:
an evaluation on four continents. J Appl Physiol, 117(7):738-744.
}
